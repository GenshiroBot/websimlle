<!DOCTYPE html>
<html lang="id">
<head>
    <title>Quantum Hopper: Lompat ke Darkweb Paradox</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(to bottom, #000428, #004e92); /* Tema darkweb biru gelap */
            font-family: Arial, sans-serif;
            color: white;
            text-align: center;
        }
        canvas {
            border: 2px solid #00ff00; /* Hijau neon ala hacker */
            display: block;
            margin: 0 auto;
            background: #111;
        }
        #instructions {
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Quantum Hopper: Lompat ke Darkweb Paradox üòà</h1>
    <canvas id="canvas" width="800" height="600"></canvas>
    <div id="instructions">
        <p>Arrow Left/Right: Gerak | Space: Lompat | M: Toggle Musik | Hindari Firewall Merah!</p>
        <p>Twist Gila: Setiap 10 lompat, gravitasi terbalik! Lompat ke dimensi baru! üåå</p>
    </div>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        // Player properties
        let player = {
            x: 50,
            y: 500, // Mulai di atas ground
            width: 30,
            height: 30,
            speed: 5,
            jumping: false,
            yVelocity: 0,
            jumpCount: 0 // Counter untuk twist gila
        };

        // Controls
        let rightPressed = false;
        let leftPressed = false;
        let jumpPressed = false;

        // Event listeners
        document.addEventListener("keydown", (event) => {
            if (event.code === "ArrowRight") rightPressed = true;
            else if (event.code === "ArrowLeft") leftPressed = true;
            else if (event.code === "Space") {
                jumpPressed = true;
                event.preventDefault(); // Biar space nggak scroll halaman
            }
            else if (event.code === "KeyM") toggleAudio();
        });

        document.addEventListener("keyup", (event) => {
            if (event.code === "ArrowRight") rightPressed = false;
            else if (event.code === "ArrowLeft") leftPressed = false;
            else if (event.code === "Space") jumpPressed = false;
        });

        // Platforms (server rahasia)
        let platforms = [
            { x: 0, y: 550, width: 800, height: 50 }, // Ground
            { x: 200, y: 450, width: 150, height: 20 },
            { x: 400, y: 350, width: 100, height: 20 },
            { x: 600, y: 250, width: 150, height: 20 }
        ];

        // Enemies (firewall bergerak)
        let enemies = [
            { x: 700, y: 500, width: 30, height: 30, speed: 2, direction: -1 } // Bergerak kiri-kanan
        ];

        // Physics & Game State
        let gravity = 0.5; // Gravitasi normal (bisa terbalik!)
        let score = 0;
        let scoreThreshold = 100;
        let gameRunning = false;
        let animationId;

        // Audio (optional - tambah file 'darkweb-bg.mp3' di folder sama)
        let audio = new Audio("darkweb-bg.mp3");
        audio.loop = true;
        audio.volume = 0.3;
        function toggleAudio() {
            if (audio.paused) audio.play().catch(() => console.log("Audio file nggak ada? Skip aja!"));
            else audio.pause();
        }

        // Draw functions
        function drawPlayer() {
            ctx.fillStyle = "#00ff00"; // Hijau neon hacker
            ctx.fillRect(player.x, player.y, player.width, player.height);
            // Tambah "mata" biar lucu
            ctx.fillStyle = "black";
            ctx.fillRect(player.x + 5, player.y + 5, 5, 5);
            ctx.fillRect(player.x + 20, player.y + 5, 5, 5);
        }

        function drawPlatforms() {
            ctx.fillStyle = "#00aa00"; // Hijau gelap
            platforms.forEach(platform => ctx.fillRect(platform.x, platform.y, platform.width, platform.height));
        }

        function drawEnemies() {
            ctx.fillStyle = "#ff0000"; // Merah firewall
            enemies.forEach(enemy => {
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                // Tambah "api" biar serem
                ctx.fillStyle = "#ff6600";
                ctx.fillRect(enemy.x + 25, enemy.y + 10, 5, 10);
            });
        }

        // Collision detection
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        // Handle platform collision
        function handlePlatformCollision() {
            platforms.forEach(platform => {
                if (checkCollision(player, platform)) {
                    if (player.yVelocity > 0 && player.y < platform.y) {
                        // Land from above
                        player.jumping = false;
                        player.y = platform.y - player.height;
                        player.yVelocity = 0;
                    } else if (player.yVelocity < 0 && player.y > platform.y) {
                        // Hit from below
                        player.y = platform.y + platform.height;
                        player.yVelocity = 0;
                    }
                }
            });
        }

        // Handle enemy collision & movement
        function updateEnemies() {
            enemies.forEach(enemy => {
                enemy.x += enemy.speed * enemy.direction;
                if (enemy.x <= 0 || enemy.x >= canvas.width - enemy.width) {
                    enemy.direction *= -1; // Balik arah
                }
                if (checkCollision(player, enemy)) {
                    gameOver();
                }
            });
        }

        // Score & Twist Gila
        function updateScore() {
            if (player.x > scoreThreshold) {
                score += 10;
                scoreThreshold += 100;
                // Tambah platform baru secara random untuk tantangan
                platforms.push({
                    x: Math.random() * (canvas.width - 150),
                    y: Math.random() * 300 + 100,
                    width: 150,
                    height: 20
                });
            }
            ctx.font = "20px Arial";
            ctx.fillStyle = "white";
            ctx.textAlign = "left";
            ctx.fillText(`Data Curian: ${score}`, 10, 30);
            ctx.fillText(`Lompatan: ${player.jumpCount} (Gravitasi: ${gravity > 0 ? 'Normal' : 'Terbalik!'})`, 10, 55);
        }

        // Jump logic dengan twist
        function handleJump() {
            if (jumpPressed && !player.jumping) {
                player.jumping = true;
                player.yVelocity = -10; // Kekuatan lompat
                player.jumpCount++;
                if (player.jumpCount % 10 === 0) {
                    gravity = -gravity; // TWIST GILA: Balik gravitasi!
                    alert(`Dimensi Terbalik! Gravitasi sekarang ${gravity > 0 ? 'Normal' : 'Terbalik!'} Lompat lagi yuk! üå™Ô∏è`);
                }
                jumpPressed = false;
            }
        }

        // Game Loop
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Player movement
            if (rightPressed && player.x < canvas.width - player.width) player.x += player.speed;
            if (leftPressed && player.x > 0) player.x -= player.speed;

            // Jump & gravity
            handleJump();
            if (player.jumping) {
                player.yVelocity += gravity;
                player.y += player.yVelocity;
                if (player.y >= canvas.height - player.height) {
                    player.jumping = false;
                    player.y = canvas.height - player.height;
                    player.yVelocity = 0;
                }
            }

            // Draw everything
            drawPlayer();
            drawPlatforms();
            updateEnemies();
            drawEnemies();
            handlePlatformCollision();
            updateScore();

            // Game over check
            if (player.y > canvas.height) {
                gameOver();
                return;
            }

            animationId = requestAnimationFrame(gameLoop);
        }

        // Game Over
        function gameOver() {
            cancelAnimationFrame(animationId);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = "50px Arial";
            ctx.fillStyle = "#ff0000";
            ctx.textAlign = "center";
            ctx.fillText("Koneksi Darkweb Terputus!", canvas.width / 2, canvas.height / 2 - 50);
            ctx.font = "20px Arial";
            ctx.fillText(`Score Akhir: ${score} Data Curian`, canvas.width / 2, canvas.height / 2 + 20);
            ctx.fillText("Tekan Space untuk Restart", canvas.width / 2, canvas.height / 2 + 50);
            gameRunning = false;
        }

        // Start Screen
        function showStartScreen() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = "40px Arial";
            ctx.fillStyle = "white";
            ctx.textAlign = "center";
            ctx.fillText("Quantum Hopper", canvas.width / 2, canvas.height / 2 - 100);
            ctx.font = "20px Arial";
            ctx.fillText("Lompat ke Darkweb, curi data, hindari firewall!", canvas.width / 2, canvas.height / 2 - 50);
            ctx.fillText("Twist: Setiap 10 lompat, gravitasi BALIK!", canvas.width / 2, canvas.height / 2);
            ctx.fillText("Tekan Space untuk Mulai", canvas.width / 2, canvas.height / 2 + 50);
        }

        // Start game on Space
        document.addEventListener("keydown", (event) => {
            if (!gameRunning && event.code === "Space") {
                gameRunning = true;
                player.x = 50;
                player.y = 500;
                player.jumpCount = 0;
                gravity = 0.5; // Reset gravitasi
                score = 0;
                scoreThreshold = 100;
                platforms = [ // Reset platforms
                    { x: 0, y: 550, width: 800, height: 50 },
                    { x: 200, y: 450, width: 150, height: 20 },
                    { x: 400, y: 350, width: 100, height: 20 },
                    { x: 600, y: 250, width: 150, height: 20 }
                ];
                enemies = [{ x: 700, y: 500, width: 30, height: 30, speed: 2, direction: -1 }];
                audio.play().catch(() => {}); // Coba play musik
                gameLoop();
            }
        });

        // Init
        showStartScreen();
    </script>
</body>
  </html>
